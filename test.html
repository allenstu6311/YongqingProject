<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Taipei Tourism</title>
   

</head>
<body>
    <div id="view">
        <h1>遊憩景點去哪裡</h1>
        <p>資料來源：https://www.travel.taipei/open-api/swagger/ui/index#/Attractions/Attractions_All</p>
        <button class="btn" @click="nexPage">Next page</button>
        {{travelData}}
    </div>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.1.3/axios.js"
integrity="sha512-xjzDqCmpabFznyCZ92vM1F0gg8ExgSukopZQOCcVbObLyJSmZAkaB9wzOCeSClearljJcjRh67cGDp2uv4diLg=="
crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://unpkg.com/vue@next"></script>
<script>
    const VM = {
        data(){
            return {
                travelData:[],
                page: 0,
                load: false
            }
        },
        methods:{
            getData2(){
                this.load= true
                fetch(`/travelapi/zh-tw/Attractions/All?page=${this.page}`, {
                    method: 'GET',
                    headers: {
                        "accept": "application/json"
                    }
                })
                .then(response => response.json())
                .then(result => {
                    this.travelData = 
                    console.log(this.travelData)
                    this.load= false
                })
                .catch(error => console.log('error', error));
            },
            getData3(){
                this.load= true
                axios.get(`/travelapi/zh-tw/Attractions/All?page=${this.page}`, {
                    headers: {
                        "accept": "application/json"
                    },
                    params: {
                        page: this.page
                    }
                })
                .then((response) => {
                    this.travelData = response.data
                })
                .catch((error) => {
                    console.log(error);
                })
                .finally(() =>{
                    this.load = false
                })
            },
            nexPage(){
                
                // this.getData2()
                
            }
        },
        mounted(){
            // this.nexPage()
           
        },
        created(){
            this.page += 1
            this.getData3() 
        }
    }
    Vue.createApp(VM).mount('#view')
</script>

</html>